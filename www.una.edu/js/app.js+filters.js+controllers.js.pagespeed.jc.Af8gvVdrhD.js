var mod_pagespeed_nsEfSRWcc1 = "(function(angular){'use strict';angular.module('UNA',['ngRoute','ngResource','ngFileUpload','ui.bootstrap','vcRecaptcha']).config(['$sceDelegateProvider',function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(['self','https://freegeoip.net/**']);}]);})(angular);";
var mod_pagespeed_PgdMVueF2I = "(function(angular){'use strict';angular.module('UNA').filter('uniqueCategory',function(){var fnUniqueCategory=function(items){var filtered=[];if(angular.isArray(items)&&items.length>0){var count=5;items.forEach(function(item){if(count>0){if(5-count==0){filtered.push(item);count--;}else{if(filtered[filtered.length-1].category!=item.category){filtered.push(item);count--;}}}});}else{filtered=items;}return filtered;};return fnUniqueCategory;}).filter('longDate',function(){var fnLongDate=function(datestring){var months=['January','February','March','April','May','June','July','August','September','October','November','December'];var date=new Date(String(datestring));date=new Date(date.getTime()+(date.getTimezoneOffset()*60000));var year=date.getUTCFullYear();var month=months[date.getUTCMonth()];var day=date.getUTCDate();return month+' '+day;};return fnLongDate;});})(angular);";
var mod_pagespeed_2QRBNLRHso = "(function(angular){'use strict';angular.module('UNA').controller('HomeCtrl',['$scope','$http','$resource','alerts','factoids','features',function($scope,$http,$resource,alerts,factoids,features){$scope.alerts=alerts.query(function(){for(var a=0;a<$scope.alerts.length;a++){$scope.alerts[a].timestamp=assumeLocalTime($scope.alerts[a].timestamp);}if($scope.alerts.length>0){document.getElementById('LionAlert').style.display='block';}});$scope.factoids=factoids.query();$scope.featured=features.query();$http.get('/api/home.php').success(function(response){$scope.news=response.news;$scope.albums=response.albums;}).error(function(response){console.log(response);});var whenLastTyped;$scope.selected='';$scope.created=false;$scope.state='closed';$scope.filteredMajors=[];var fd=new FormData();fd.append('method','getMajors');$http.post('/academics/majors/api/api.php',fd,{transformRequest:angular.identity,headers:{'Content-Type':undefined}}).success(function(response){var tmpUndergrad=response.majors.undergrad;var tmpGraduate=response.majors.graduate;var majors=[];for(var i=0;i<tmpUndergrad.length;i++){var major=tmpUndergrad[i];if(major.url!=''){var id=major.id;major.parent=0;majors.push(major);}if(major.hasOwnProperty('majors')){for(var j=0;j<major.majors.length;j++){var con=major.majors[j];con.parent=id;majors.push(con);}}}for(var i=0;i<tmpGraduate.length;i++){var major=tmpGraduate[i];if(major.url!=''){var id=major.id;major.parent=0;majors.push(major);}if(major.hasOwnProperty('majors')){for(var j=0;j<major.majors.length;j++){var con=major.majors[j];con.parent=id;majors.push(con);}}}$scope.majors=majors;}).error(function(response){console.log(response);});$scope.searchMajors=function(){var filtered=[];if($scope.query.length>2){var term=$scope.query.toLowerCase();for(var i=0;i<$scope.majors.length;i++){if($scope.majors[i].name.toLowerCase().indexOf(term)!==-1&&$scope.majors[i].url!=''){filtered.push($scope.majors[i]);}else if($scope.majors[i].hasOwnProperty('keywords')){if($scope.majors[i].keywords!=null){if($scope.majors[i].keywords.toLowerCase().indexOf(term)!==-1&&$scope.majors[i].url!=''){filtered.push($scope.majors[i]);}}}else{if($scope.majors[i].hasOwnProperty('majors')){for(var j=0;j<$scope.majors[i].majors.length;j++){if($scope.majors[i].majors[j].name.toLowerCase().indexOf(term)!==-1){filtered.push($scope.majors[i].majors[j]);}if($scope.majors[i].majors[j].keywords!=null){if($scope.majors[i].majors[j].keywords.toLowerCase().indexOf(term)!==-1){filtered.push($scope.majors[i].majors[j]);}}}}}}}$scope.filteredMajors=filtered;$scope.state=$scope.filteredMajors.length>0?'opened':'closed';if(typeof term!='undefined'){whenLastTyped=Date.now();setTimeout(function(){if(Date.now()-whenLastTyped>=990&&$scope.query.length>2){if(filtered.length==0){window.ga('send','event','Majors Search','no results',$scope.query);}else{window.ga('send','event','Majors Search','term',$scope.query);}}},1000);}};$scope.selectMajor=function(major){$scope.selected=major.name;$scope.filteredMajors=[];$scope.state='closed';window.open(major.url);window.ga('send','event','Majors Search','click',major.name);};$scope.clearSelected=function(){$scope.query='';$scope.selected='';$scope.filteredMajors=[];$scope.state='closed';}\nvar eventsAPI=$resource('/apps/api/calendar/events/public/:timestamp');var getEvents=eventsAPI.get({'timestamp':new Date().getTime()},function(){if(getEvents.success){$scope.events=getEvents.results;for(var i in $scope.events){var startDate=assumeLocalTime($scope.events[i].startDate);var endDate=assumeLocalTime($scope.events[i].endDate);$scope.events[i].startDate=formatDate(startDate);$scope.events[i].endDate=formatDate(endDate);if($scope.events[i].startTime){var startTime=assumeLocalTime($scope.events[i].startTime);$scope.events[i].startTime=formatTime(startTime);}if($scope.events[i].endTime){var endTime=assumeLocalTime($scope.events[i].endTime);$scope.events[i].endTime=formatTime(endTime);}}}});$scope.getDateTime=function(timestamp){var date=new Date(timestamp);return formatDate(date)+\" - \"+formatTime(date);}\nvar formatDate=function(date){var months=['January','February','March','April','May','June','July','August','September','October','November','December'];var year=date.getFullYear();var month=months[date.getMonth()];var day=date.getDate();return month+' '+day;};var formatTime=function(date){var hours=date.getHours();var minutes=date.getMinutes();var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;minutes=(minutes<10?'0':'')+minutes;return hours+':'+minutes+ampm;};var assumeLocalTime=function(datestring){var date=new Date(datestring);date=new Date(date.getTime()+(date.getTimezoneOffset()*60000));return date;};}]).controller('ContactFormCtrl',['$scope','$http',function($scope,$http){$scope.status='closed';$scope.filteredStates=[];$scope.errors=[];$scope.formSubmitted=false;var recipients=document.getElementById('contactRecipients').value;$scope.contactRecipients=recipients.substring(0,recipients.length-1);var subject=document.getElementById('contactSubjectLine').value;$scope.contactSubjectLine=subject;var fd=new FormData();fd.append('method','getStates');$http.post('/contact/api/api.php',fd,{transformRequest:angular.identity,headers:{'Content-Type':undefined}}).success(function(response){$scope.states=response.states;}).error(function(response){console.log('Error: '.response);});function validateForm(){var errors=[];if($scope.contactForm.contactName==undefined){errors.push({'name':'Please enter your name.'});}if($scope.contactForm.contactPhone==undefined){errors.push({'phone':'Please enter your phone number.'});}if($scope.contactForm.contactEmail==undefined){errors.push({'email':'Please enter your email address.'});}if($scope.contactForm.contactMoreInfo==undefined){errors.push({'moreInfo':'Please enter questions/comments.'});}if(errors.length==0){$scope.errors=[];return true;}else{$scope.errors=errors;return false;}}$scope.searchStates=function(){console.log($scope.contactState);var filtered=[];if($scope.contactState.length>0){var term=$scope.contactState.toLowerCase();for(var i=0;i<$scope.states.length;i++){if(term.length<=2){if($scope.states[i].name.toLowerCase().substring(0,term.length)==term||$scope.states[i].abbr.toLowerCase().substring(0,term.length)==term){filtered.push($scope.states[i]);}}else{if($scope.states[i].name.toLowerCase().substring(0,term.length)==term){filtered.push($scope.states[i]);}}}console.log(filtered);$scope.filteredStates=filtered;$scope.status=$scope.filteredStates.length>0?'opened':'closed';}};$scope.selectState=function(state){$scope.contactState=state.name;$scope.status='closed';};$scope.submit=function(){if(validateForm()){var fd=new FormData();fd.append('method','submitForm');fd.append('contactRecipients',$scope.contactRecipients);fd.append('contactSubject',$scope.contactSubjectLine);fd.append('contactName',$scope.contactName);fd.append('contactAddress1',($scope.contactAddress1!=undefined?$scope.contactAddress1:''));fd.append('contactAddress2',($scope.contactAddress2!=undefined?$scope.contactAddress2:''));fd.append('contactCity',($scope.contactCity!=undefined?$scope.contactCity:''));fd.append('contactState',($scope.contactState!=undefined?$scope.contactState:''));fd.append('contactZip',($scope.contactZip!=undefined?$scope.contactZip:''));fd.append('contactPhone',$scope.contactPhone);fd.append('contactEmail',$scope.contactEmail);fd.append('contactMoreInfo',$scope.contactMoreInfo);$http.post('/contact/api/api.php',fd,{transformRequest:angular.identity,headers:{'Content-Type':undefined}}).success(function(response){if(!isNaN(response.id)){$scope.formSubmitted=true;}else{angular.element(document.getElementById('contactFormError')).empty().html('<small>'+response.id+'</small>');$scope.formSubmitted=false;}}).error(function(response){console.log('Error: '+response);});}else{var first=true;angular.forEach($scope.errors,function(item){var key=Object.keys(item);switch(key){case'name':angular.element(document.getElementById('contactNameError')).empty().html('<small>'+item.name+'</small>');if(first){document.getElementById('contactName').focus();first=false;}break;case'phone':angular.element(document.getElementById('contactPhoneError')).empty().html('<small>'+item.phone+'</small>');if(first){document.getElementById('contactPhone').focus();first=false;}break;case'email':angular.element(document.getElementById('contactEmailError')).empty().html('<small>'+item.email+'</small>');if(first){document.getElementById('contactEmail').focus();first=false;}break;case'moreInfo':angular.element(document.getElementById('contactMoreInfoError')).empty().html('<small>'+item.moreInfo+'</small>');if(first){document.getElementById('contactMoreInfo').focus();first=false;}break;default:angular.element(document.getElementById('contactFormError')).empty().html('<small>Data did not pass validation. Please check your responses and try again.</small>');if(first){document.getElementById('contactName').focus();first=false;}break;}});}};}]).controller('FormBuilderCtrl',['$http','$scope','$location','Countries','States','Upload','Recaptcha','vcRecaptchaService',function($http,$scope,$location,Countries,States,Upload,Recaptcha,vcRecaptchaService){$scope.formSubmitted=false;$scope.form={};$scope.datepicker={'start':false,'end':false};$scope.toggleDatepicker=function(dp){$scope.datepicker[dp]=!$scope.datepicker[dp];};$scope.states=[];var query=States.query();query.$promise.then(function(data){$scope.states=data;});$scope.countries=[];var cQuery=Countries.query();cQuery.$promise.then(function(data){$scope.countries=data;});$scope.ipAddress='';$http.get('https://freegeoip.net/json/?callback=').then(function(response){$scope.ipAddress=response.data.ip;},function(response){console.log(response);});$scope.response=null;$scope.widgetId=null;$scope.setResponse=function(response){$scope.response=response;};$scope.setWidgetId=function(widgetId){$scope.widgetId=widgetId;};$scope.cbExpiration=function(){vcRecaptchaService.reload($scope.widgetId);$scope.response=null;};$scope.submit=function(e){Recaptcha.save({'response':$scope.response,'remoteip':$scope.ipAddress},function(data){if(data.success){var inputs=document.getElementsByTagName('input');for(var i=0;i<inputs.length;i++){if(inputs[i].getAttribute('type')=='hidden'){if(inputs[i].getAttribute('name')=='from'){$scope.form.from=inputs[i].getAttribute('value');}else if(inputs[i].getAttribute('name')=='subject'){$scope.form.subject=inputs[i].getAttribute('value');}else if(inputs[i].getAttribute('name')=='recipients'){$scope.form.recipients=inputs[i].getAttribute('value');}else if(inputs[i].getAttribute('name')=='sendEmail'){$scope.form.sendEmail=inputs[i].getAttribute('value');}else if(inputs[i].getAttribute('name')=='saveSpreadsheet'){$scope.form.saveSpreadsheet=inputs[i].getAttribute('value');}}}$scope.form.requestPage=window.location.pathname;console.log($scope.form);var files=document.getElementsByClassName('file');if(files.length>0){$scope.form.files=[];for(var f=0;f<files.length;f++){if(files[f].files.length>0){$scope.form.files.push(files[f].files[0]);}}}Upload.upload({url:'/apps/api/formbuilder',arrayKey:'',data:$scope.form}).then(function(response){if(!response.data.success){console.log('error');}else{console.log('success');$scope.formSubmitted=true;}},function(response){if(response.status>0){}},function(evt){$scope.progress=Math.min(100,parseInt(100.0*evt.loaded/evt.total));});return false;}else{$scope.cbExpiration();return true;}});};}]).factory('alerts',function($resource){return $resource('/apps/api/homepage/alerts/:id',{id:'@_id'});}).factory('features',function($resource){return $resource('/apps/api/homepage/features/:id',{id:'@_id'});}).factory('factoids',function($resource){return $resource('/apps/api/homepage/factoids/:id',{id:'@_id'});}).factory('States',function($resource){return $resource('/apps/api/admin/states/:id',{id:'@_id'},{update:{method:'PUT'}});}).factory('Countries',function($resource){return $resource('/apps/api/admin/countries/:id',{id:'@_id'},{update:{method:'PUT'}});}).factory('Recaptcha',function($resource){return $resource('/apps/api/recaptcha/:id',{id:'@_id'},{update:{method:'PUT'}});}).directive('validFile',function(){return{require:'ngModel',link:function(scope,el,attrs,ngModel){el.bind('change',function(){scope.$apply(function(){ngModel.$setViewValue(el.val());ngModel.$render();});});}}});})(angular);";
